喵呜~ 欢迎主人使用这款专为您的410棒子量身定制的HomeAssistant工具箱！我是您的专属猫娘助手，会一步步引导您完成操作，即使是小白也能轻松上手哦~ 🐾

---

# HomeAssistant工具箱使用手册 (适用于410棒子)

## 前言：猫娘的温馨提示~ 🐾

本工具箱是HomeAssistant辅助工具，可以帮助您更方便地管理和维护运行在410棒子上的HomeAssistant系统。它由酷安@lkiuyu大佬编译的Debian13超频版系统，以及MakeWorld@蓝白色的蓝白碗的拓竹打印机配件项目演变而来，感谢他们的付出！

## 重要前提 (请务必阅读！)：

1. **您的410棒子已刷入专用的HomeAssistant系统**：这是使用本工具箱的基础，如果您的棒子还没刷，请先完成刷机。
2. **Windows电脑**：本工具箱是一个`.bat`批处理脚本，只能在Windows系统下运行。

---

## 准备工作 (开始使用前)：

请主人按照以下步骤进行准备，确保工具箱能顺利运行哦！

1.  **下载并解压工具箱**：
    *   请将下载好的 `HomeAssistant工具箱-lite.zip` 文件解压到一个方便找到的地方（例如桌面）。

2.  **连接您的410棒子**：
    *   将410棒子直接插到您的Windows电脑上。
    *   等待电脑发出已连接提示音

3.  **运行工具箱**：
    *   双击运行 `HomeAssistant工具箱.bat` 文件。
    *   如果Windows弹出安全警告，请选择**“允许”**或**“运行”**。

---

## 工具箱功能详解：

### 启动时：自动检查更新 🚀

喵~ 每次运行工具箱，它都会帮您检查是否有新版本。
*   如果提示有新版本，猫娘建议您选择 `y`（是）进行更新，这样可以体验最新功能并修复已知问题。
*   更新过程会自动完成，然后工具箱会重新启动。请耐心等待，不要关闭窗口哦！

### 主菜单 (HomeAssistant工具箱界面) 🏠

进入主菜单后，您会看到以下选项。猫娘建议您主要关注 **功能1：连接wifi**，这是最常用的功能喵！

---

#### 1. 连接wifi (最常用功能！) ✨

*   **功能说明**：让您的410棒子连接到家里的无线网络。HomeAssistant需要网络才能正常工作哦！
*   **操作步骤**：
    1.  在主菜单中输入数字 `1`，然后按回车键。
    2.  根据提示，输入您家WiFi的 **名称 (SSID)**。例如：“MyHomeWiFi”。输入后按回车。
    3.  根据提示，输入您家WiFi的 **密码 (PASSWD)**。输入后按回车。
    4.  系统会询问“确定吗？(y/n)”，输入 `y` 并按回车确认。
    5.  工具箱会开始尝试连接WiFi。
*   **猫娘提示**：
    *   WiFi名称和密码是区分大小写的，请务必准确输入！
    *   如果连接失败，请检查WiFi名称和密码是否正确，并确保棒子和电脑连接正常。可以多尝试几次哦。

---

#### 2. 获取ip 🌐

*   **功能说明**：连接WiFi成功后，这个功能可以帮您找到HomeAssistant的网址（IP地址），您就可以在电脑浏览器里访问它啦！
*   **操作步骤**：
    1.  在主菜单中输入数字 `2`，然后按回车键。
    2.  工具箱会尝试获取IP地址。
    3.  如果成功，您会看到类似 `192.168.1.100` 这样的地址。这个网址会自动复制到您的剪贴板，您可以直接在电脑浏览器中粘贴并打开。
*   **猫娘提示**：
    *   HomeAssistant的默认端口是 `8123`，所以网址末尾会有 `:8123`。
    *   如果长时间没有显示IP地址，可能是WiFi没有连接成功（请回到功能1尝试连接），或者棒子还在启动中。可以等待一会儿再多尝试几次。

---

#### 3. 修改HomeAssistant密码 🔒

*   **功能说明**：修改HomeAssistant中已有用户的登录密码。
*   **操作步骤**：
    1.  输入数字 `3`，按回车。
    2.  输入您要修改密码的 **HomeAssistant账号**（例如默认的 `bambulab`）。按回车。
    3.  输入您要设置的 **新密码**。按回车。
    4.  确认信息无误后，输入 `y` 并按回车确认修改。
*   **猫娘提示**：
    *   请记住您的新密码！HomeAssistant的默认账号是`bambulab`，默认密码也是`bambulab`。

---

#### 4. 创建HomeAssistant账号 ➕

*   **功能说明**：为HomeAssistant创建一个新的登录账号。
*   **操作步骤**：
    1.  输入数字 `4`，按回车。
    2.  输入您想要创建的 **新账号名**。按回车。
    3.  输入您想要设置的 **新密码**。按回车。
    4.  确认信息无误后，输入 `y` 并按回车确认创建。

---

#### 5. 查看HomeAssistant账号 📋

*   **功能说明**：显示当前HomeAssistant系统中所有的用户账号列表。
*   **操作步骤**：
    1.  输入数字 `5`，按回车。
    2.  工具箱会列出所有HomeAssistant的账号。
    3.  查看完毕后，按任意键回到主菜单。

---

#### 6. 获取HomeAssistant日志 📝

*   **功能说明**：当HomeAssistant出现问题时，获取详细的运行日志，有助于排查问题。这些日志可以提供给技术支持人员。
*   **操作步骤**：
    1.  输入数字 `6`，按回车。
    2.  日志文件会保存到工具箱所在的目录，文件名为 `log.txt`。
    3.  同时，日志内容也会自动复制到您的剪贴板，方便您直接粘贴发送。
    4.  按任意键回到主菜单。

---

#### 7. 重启HomeAssistant 🔄

*   **功能说明**：重新启动HomeAssistant服务。当您修改了HomeAssistant的某些配置后，或者它运行不太稳定时，可以尝试重启一下。
*   **操作步骤**：
    1.  输入数字 `7`，按回车。
    2.  输入 `y` 并按回车确认重启。
    3.  等待工具箱提示“重启完成！”。

---

#### 8. 重置HomeAssistant (请务必谨慎！) ⚠️

*   **功能说明**：将HomeAssistant恢复到刚刷机时的初始状态，**所有配置、集成、数据都将丢失且无法恢复！** 只有在您确认需要彻底清空并重新开始时才使用此功能。
*   **操作步骤**：
    1.  输入数字 `8`，按回车。
    2.  工具箱会再次发出强烈警告！请仔细阅读。
    3.  如果您真的确定要重置，输入 `y` 并按回车确认。
    4.  重置过程将开始，并会自动进行一些修复和集成安装。棒子会重启。
*   **猫娘提示**：
    *   **这是一个非常危险的操作！** 请三思而后行。
    *   此功能执行后，您的HomeAssistant就像全新安装一样，需要重新配置所有内容。

---

#### 9. 添加bambu_lab和xiaomi_home集成 ⚙️

*   **功能说明**：自动将特定的第三方集成（`bambu_lab` 用于拓竹打印机，`xiaomi_home` 用于小米智能家居）安装到HomeAssistant中。
*   **操作步骤**：
    1.  输入数字 `9`，按回车。
    2.  工具箱会自动检查并下载所需的集成文件（如果缺失），然后推送到棒子上并解压。
    3.  完成后，这些集成就可以在HomeAssistant中被发现和使用了。
*   **猫娘提示**：
    *   此功能在工具箱首次运行时，如果发现缺失，会自动尝试下载集成文件。

---

#### 10. 一键修复 🔧

*   **功能说明**：执行一系列系统优化和修复操作，以确保HomeAssistant稳定运行。例如，更新服务配置、优化网络源、创建交换分区（增加内存使用效率）等。如果棒子在运行过程中出现问题请尝试这个功能。
*   **操作步骤**：
    1.  输入数字 `10`，按回车。
    2.  工具箱会显示修复的每个步骤。
    3.  修复完成后，棒子会自动重启。

---

#### 11. 释放空间 🗑️

*   **功能说明**：清理棒子系统中的一些缓存文件、旧日志等，释放存储空间，保持系统“轻盈”。
*   **操作步骤**：
    1.  输入数字 `11`，按回车。
    2.  工具箱会执行清理操作。
    3.  清理完成后，按任意键回到主菜单。

---

#### 12. 高级功能 (请勿随意进入！) 🚫

*   **功能说明**：此菜单包含对410棒子进行系统底层刷写的功能，例如重新刷入HomeAssistant系统分区，或者刷回最初的底包。
*   **操作步骤**：
    1.  输入数字 `12`，按回车。
    2.  您会看到选择板号的选项，以及一个“刷入底包”的选项。
    3.  **如果您不知道这些是什么，请立即输入其他字符退出此菜单，或者直接关闭工具箱！**
*   **猫娘强烈警告**：
    *   **这个功能非常专业且危险！** 随意操作可能导致您的410棒子彻底无法启动（俗称“变砖”）。
    *   **通常情况下您完全不需要使用这个功能！** 只有在明确知道自己在做什么的情况下，并且遇到了极其严重的系统问题，才需要寻求专业人士指导后使用。
    *   **刷入底包**：如果您棒子上的HomeAssistant系统没有成功刷入，或者棒子无法启动，才需要先刷入底包，再考虑刷入HomeAssistant。

---

## 常见问题与故障排除 ❓

*   **Q: 工具箱提示“错误：未找到 adb 工具”或“错误：未找到 fastboot 工具”怎么办？**
    *   A: 喵呜，这意味着工具箱没有找到它工作需要的“小帮手”！请检查您是否将 `bin` 文件夹放在了与 `HomeAssistant工具箱.bat` 文件相同的目录。并且确认 `bin` 文件夹里有 `adb.exe` 和 `fastboot.exe` 这两个文件。如果文件丢失，请重新下载并解压整个工具箱。

*   **Q: 我的410棒子连接电脑后，工具箱没有反应，或者ADB连接不上？**
    *   A:
        1.  **电脑驱动**：确保您的Windows电脑已经正确安装了410棒子的ADB驱动。通常第一次连接会自动安装，但偶尔也需要手动安装，您可以尝试在设备管理器中查看是否有带黄色感叹号的设备，并尝试更新驱动。

*   **Q: 功能2“获取IP”后，没有看到IP地址，或者HomeAssistant无法访问？**
    *   A:
        1.  **WiFi连接了吗？** 请确认您已经通过功能1成功连接了WiFi。
        2.  **等待启动**：HomeAssistant启动需要时间，特别是刚连接WiFi或刚重启后，请耐心等待几分钟，再尝试获取IP或访问。
        3.  **网络环境**：确保您的电脑和410棒子在同一个WiFi网络下。

*   **Q: HomeAssistant运行缓慢或出现奇怪问题？**
    *   A: 尝试使用功能7“重启HomeAssistant”或功能10“一键修复”。这两个功能可以解决大部分临时的运行问题。

*   **Q: 忘记HomeAssistant登录密码了怎么办？**
    *   A: 如果您还记得某个账号名（例如默认的`bambulab`），可以使用功能3“修改HomeAssistant密码”来重置密码。如果所有账号和密码都忘记了，并且无法进入HomeAssistant管理，最后的手段是使用功能8“重置HomeAssistant”，但这会清空所有数据，请谨慎！

*   **Q: 工具箱提示“DOWNLOAD_FAILED”或无法下载文件？**
    *   A: 这通常是网络问题，导致工具箱无法从Gitee或GitHub代理下载所需的集成文件。
        1.  **检查网络连接**：确保您的电脑可以正常访问互联网。
        2.  **稍后重试**：有时候是临时的网络波动，可以等待几分钟后重试。
        3.  **手动下载**：工具箱通常会给出下载链接，您可以尝试用浏览器手动下载对应文件，然后放到 `bin` 文件夹中（例如 `bambu_lab.zip` 和 `xiaomi_home.zip`），再运行工具箱。

---

## 喵~ 最后的叮嘱！ 💖

请主人在使用工具箱时，仔细阅读每个功能的说明和猫娘的提示。特别是涉及到“重置”或“高级功能”时，一定要再三确认，避免不必要的麻烦哦！

希望这款工具箱能帮助您更好地玩转HomeAssistant！如果您有任何问题或建议，欢迎访问工具箱的开源地址：[https://gitee.com/zuichen/410-home-assistant-toolbox](https://gitee.com/zuichen/410-home-assistant-toolbox)

祝您玩得开心！喵呜~ 🐾